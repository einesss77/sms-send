<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SMS Dashboard</title>
    <style>
        :root { --border:#e5e7eb; --bg:#f7f7fb; --card:#ffffff; --txt:#111827; --muted:#6b7280; }
        body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background: var(--bg); color: var(--txt); }
        .container { max-width: 1100px; margin: 0 auto; padding: 18px; }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 14px; box-shadow: 0 8px 24px rgba(17,24,39,.05); }
        .header { display:flex; gap:12px; align-items:center; justify-content:space-between; padding: 14px 14px 10px; }
        .title { font-size: 18px; font-weight: 700; }
        .sub { font-size: 12px; color: var(--muted); margin-top: 2px; }
        .row { display:flex; gap:10px; flex-wrap:wrap; padding: 0 14px 14px; }
        .row > * { flex: 1 1 180px; }

        input, select, button {
            width:100%; box-sizing:border-box; padding: 10px 12px;
            border: 1px solid var(--border); border-radius: 12px;
            background: #fff; color: var(--txt);
        }
        button { cursor:pointer; font-weight: 600; }
        button:active { transform: translateY(1px); }

        .tableWrap { overflow:auto; border-top: 1px solid var(--border); }
        table { width:100%; border-collapse: collapse; min-width: 760px; }
        th, td { padding: 12px; border-bottom: 1px solid var(--border); vertical-align: top; }
        th { text-align:left; font-size: 12px; letter-spacing: .02em; text-transform: uppercase; color: var(--muted); position: sticky; top: 0; background: #fff; }
        td { font-size: 14px; }
        .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; font-size: 12px; color: var(--muted); }

        .status { font-weight: 700; display:inline-flex; align-items:center; gap:8px; }
        .dot { width:10px; height:10px; border-radius: 999px; display:inline-block; }
        .PENDING .dot { background: #f59e0b; }
        .SENT .dot { background: #10b981; }
        .FAILED .dot { background: #ef4444; }

        .actions { display:flex; gap:8px; }
        .btnSmall { padding: 8px 10px; border-radius: 10px; border: 1px solid var(--border); background:#fff; }
        .btnPrimary { border-color: #111827; }
        .btnDanger { border-color: #ef4444; }

        /* Mobile: on affiche en "cartes" */
        @media (max-width: 820px) {
            table { min-width: 0; }
            thead { display:none; }
            tbody, tr, td { display:block; width:100%; }
            tr { border-bottom: 1px solid var(--border); padding: 12px; }
            td { border:0; padding: 6px 0; }
            td[data-label]::before {
                content: attr(data-label);
                display:block;
                font-size: 12px;
                color: var(--muted);
                text-transform: uppercase;
                margin-bottom: 4px;
            }
            .actions { margin-top: 10px; }
        }

        /* Login overlay */
        .overlay {
            position: fixed; inset: 0; background: rgba(17,24,39,.55);
            display: flex; align-items: center; justify-content: center; padding: 18px;
        }
        .login {
            width: 100%; max-width: 420px;
            padding: 16px; border-radius: 16px;
            background: #fff; border: 1px solid var(--border);
        }
        .login h2 { margin: 0 0 6px; }
        .login p { margin: 0 0 14px; color: var(--muted); font-size: 13px; }
        .login .grid { display:grid; gap:10px; }
        .err { color: #ef4444; font-size: 13px; display:none; }
    </style>
</head>

<body>
<!-- Login -->
<div class="overlay" id="overlay">
    <div class="login card">
        <h2>Accès Dashboard</h2>
        <p>Mot de passe requis.</p>
        <div class="grid">
            <input id="pwd" type="password" placeholder="Mot de passe" autocomplete="current-password" />
            <button id="btnLogin" class="btnSmall btnPrimary">Se connecter</button>
            <div class="err" id="err">Mot de passe incorrect.</div>
        </div>
        <div class="mono" style="margin-top:10px;">
            Astuce: c’est un verrou “simple” côté navigateur (pas sécurisé côté prod).
        </div>
    </div>
</div>

<!-- App -->
<div class="container">
    <div class="card">
        <div class="header">
            <div>
                <div class="title">Historique SMS</div>
                <div class="sub" id="subline">Connexion…</div>
            </div>
            <div style="width: 180px;">
                <button id="btnRefresh" class="btnSmall btnPrimary">Rafraîchir</button>
            </div>
        </div>

        <div class="row">
            <div>
                <label class="mono">API URL</label>
                <input id="apiUrl" placeholder="http://127.0.0.1:8000" />
            </div>

            <div>
                <label class="mono">Statut</label>
                <select id="status">
                    <option value="">Tous</option>
                    <option value="PENDING">PENDING</option>
                    <option value="SENT">SENT</option>
                    <option value="FAILED">FAILED</option>
                </select>
            </div>

            <div>
                <label class="mono">Recherche (numéro / message)</label>
                <input id="q" placeholder="ex: 0612… / “bonjour”" />
            </div>

            <div>
                <label class="mono">Limite</label>
                <select id="limit">
                    <option>100</option>
                    <option selected>200</option>
                    <option>500</option>
                    <option>1000</option>
                </select>
            </div>
        </div>

        <div class="tableWrap">
            <table>
                <thead>
                <tr>
                    <th>Statut</th>
                    <th>Numéro</th>
                    <th>Message</th>
                    <th>Tentatives</th>
                    <th>Dates</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody id="tbody">
                <tr><td colspan="6" class="mono">Chargement…</td></tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script src="/web/script.js"></script>

</body>
</html>
